## 任务中心 / 学分明细 接口文档

---

## 1. 获取任务中心数据

### 请求信息

- **接口地址**：`/api/app/v1/task/center`
- **请求方式**：GET
- **接口说明**：用于「任务中心」页面，返回顶部学分余额、Tab 配置、当前 Tab 的任务列表。

### 请求参数（Query）

| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| tab | string | 否 | Tab 标识：`newbie`（新人任务）/ `daily`（日常任务），默认 `newbie` |

### 响应数据

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "scoreBalance": 52,
    "tabs": [
      { "label": "新人任务", "value": "newbie" },
      { "label": "日常任务", "value": "daily" }
    ],
    "currentTab": "newbie",
    "list": [
      {
        "id": 1,
        "title": "加入一个兴趣体验营",
        "rewardScore": 5,
        "status": "done",
        "actionText": "已完成",
        "sortNo": 1
      },
      {
        "id": 2,
        "title": "开始一门正式课程的学习",
        "rewardScore": 20,
        "status": "todo",
        "actionText": "去完成",
        "sortNo": 2
      }
    ]
  }
}
```

### 字段说明

`data` 字段：

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| scoreBalance | number | 当前用户学分余额 |
| tabs | array | 任务页签配置 |
| currentTab | string | 当前激活页签：`newbie` / `daily` |
| list | array | 当前页签下任务列表 |

`list` 单条任务字段：

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| id | number | 任务ID |
| title | string | 任务标题 |
| rewardScore | number | 完成后可获得学分 |
| status | string | 任务状态：`done`（已完成）/ `todo`（待完成）/ `locked`（未解锁） |
| actionText | string | 右侧按钮文案，如「去完成」「已完成」「明日再来」 |
| sortNo | number | 可选，任务序号（新人任务可用） |
| avatar | string | 可选，任务头像（日常任务可用） |

---

## 2. 获取学分明细（分页）

### 请求信息

- **接口地址**：`/api/app/v1/task/score/detail`
- **请求方式**：GET
- **接口说明**：用于「学分明细」页面，返回学分汇总和明细流水。

### 请求参数（Query）

| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| page | number | 是 | 页码，从 `1` 开始 |
| pageSize | number | 是 | 每页条数 |

### 响应数据

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "scoreBalance": 52,
    "totalEarned": 507,
    "list": [
      {
        "id": 1,
        "title": "每日发帖",
        "time": "2026.01.07 09:41:18",
        "scoreChange": 2
      },
      {
        "id": 2,
        "title": "加入一个兴趣俱乐部",
        "time": "2026.01.07 09:41:18",
        "scoreChange": 10
      }
    ],
    "total": 5,
    "page": 1,
    "pageSize": 20
  }
}
```

### 字段说明

`data` 字段：

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| scoreBalance | number | 当前学分余额 |
| totalEarned | number | 累计获得学分 |
| list | array | 学分明细列表 |
| total | number | 明细总条数 |
| page | number | 当前页 |
| pageSize | number | 每页条数 |

`list` 单条明细字段：

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| id | number | 明细ID |
| title | string | 明细标题 |
| time | string | 发生时间文案（后端可直接格式化） |
| scoreChange | number | 学分变动值，正数为增加，负数为扣减 |

---

## 3. 通用响应约定

```json
{
  "code": 200,
  "message": "success",
  "data": {}
}
```

- 成功码兼容 `200` 或 `0`。
- 失败时建议统一返回：`code` + 可读 `message`。

### 错误响应示例

```json
{
  "code": 400,
  "message": "参数错误",
  "data": null
}
```

常见错误码：

| 错误码 | 说明 |
| --- | --- |
| 200 / 0 | 成功 |
| 400 | 参数错误 |
| 401 | 未登录或登录失效 |
| 500 | 服务端异常 |
