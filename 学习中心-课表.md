## 学习页（课表Tab）接口文档

---

## 1. 获取课表区间数据（日期分组 + 日历红点）

### 请求信息

- **接口地址**：`/api/app/v1/study/schedule/range`
- **请求方式**：GET
- **接口说明**：返回指定日期区间内的课表数据。用于：
  - 顶部日历（周/月）红点展示
  - 下方按天分组列表展示
  - 滚动跨天时的日期联动

### 请求参数（Query）

| 参数名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| startDate | string | 是 | 起始日期，格式：`YYYY-MM-DD` |
| endDate | string | 是 | 结束日期，格式：`YYYY-MM-DD` |

### 响应数据

```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "startDate": "2026-02-27",
    "endDate": "2026-03-12",
    "marks": [
      { "date": "2026-02-27", "hasSchedule": true },
      { "date": "2026-02-28", "hasSchedule": true },
      { "date": "2026-03-01", "hasSchedule": false }
    ],
    "sections": [
      {
        "date": "2026-02-27",
        "list": [
          {
            "id": 101,
            "type": "course",
            "time": "19:30",
            "title": "今日直播：节气养正公开课",
            "cover": "https://example.com/cover.jpg",
            "progressText": "已学0%",
            "actionText": "去学习",
            "actionType": "learn",
            "bizId": 90001,
            "checkinTask": {
              "id": 70021,
              "title": "打卡：提交今日学习心得",
              "actionText": "去完成",
              "actionType": "task",
              "bizId": 70021
            }
          }
        ]
      },
      {
        "date": "2026-02-28",
        "list": [
          {
            "id": 201,
            "type": "course",
            "time": "19:00",
            "title": "7天健康食养体验营 第1课",
            "cover": "https://example.com/cover2.jpg",
            "progressText": "未学习",
            "actionText": "去学习",
            "actionType": "learn",
            "bizId": 90002
          }
        ]
      }
    ]
  }
}
```

### 字段说明

#### `data.marks[]`

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| date | string | 日期，格式 `YYYY-MM-DD` |
| hasSchedule | boolean | 当天是否有课表项（有则前端打点） |
| dotColor | string | 可选，红点颜色（前端可忽略） |

#### `data.sections[]`

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| date | string | 日期，格式 `YYYY-MM-DD` |
| list | array | 当天课表列表 |

#### `data.sections[].list[]`

| 字段名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| id | number | 是 | 课表项ID |
| type | string | 是 | 固定为 `course` |
| time | string | 是 | 时间文案，例如 `19:30` |
| title | string | 是 | 标题 |
| cover | string | 否 | 封面图（`course` 类型建议返回） |
| progressText | string | 否 | 进度文案（`course` 类型使用） |
| actionText | string | 是 | 右侧按钮文案，如 `去学习` / `去完成` |
| actionType | string | 否 | 行为类型，如 `learn` / `task` / `view` |
| bizId | number/string | 否 | 业务ID（用于跳转） |
| checkinTask | object | 否 | 课程关联打卡任务；有则在课程卡下展示打卡行 |

#### `data.sections[].list[].checkinTask`

| 字段名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| id | number/string | 是 | 打卡任务ID |
| title | string | 是 | 打卡文案（如 `打卡：第一课作业`） |
| actionText | string | 是 | 右侧按钮文案（如 `去完成`） |
| actionType | string | 否 | 行为类型（如 `task` / `view`） |
| bizId | number/string | 否 | 业务ID（用于跳转） |
| icon | string | 否 | 自定义图标地址（不传则前端用默认图标） |

---

## 前端联动约定（给后端参考）

- 前端日历红点优先使用 `marks`。
- 若 `marks` 未返回，前端会根据 `sections[].list.length > 0` 自动补红点。
- `sections` 可以缺少某些日期，前端会自动补空天（显示“当天暂无课表”）。
- 建议服务端保证 `date` 使用统一时区（建议东八区）并返回 `YYYY-MM-DD`。
- 打卡任务请放在课程项的 `checkinTask` 字段返回；如果课程没有打卡需求，`checkinTask` 不传或为 `null`。

---

## 通用响应约定

```json
{
  "code": 200,
  "msg": "success",
  "data": {}
}
```

- 成功码兼容 `200` 或 `0`。
- 失败时返回统一错误码（如 `400`、`401`、`500`）和可读 `msg`。
